<p align="center">
    <h1 align="center">
        Writer API
    </h1>
    <p align="center">ê²Œì‹œê¸€ì„ ì‘ì„±í•˜ê³  ì¡°íšŒí•˜ëŠ” API ì…ë‹ˆë‹¤. ê²Œì‹œê¸€ ì‘ì„±ì‹œ í˜„ì¬ ë‚ ì”¨ ì •ë³´ë¥¼ ìë™ìœ¼ë¡œ ì €ì¥í•˜ê³  ì„¤ì •í•œ passwordë¡œ ì‚­ì œ, ìˆ˜ì •ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤. infinite ìŠ¤í¬ë¡¤ì„ ì—¼ë‘ì— ë‘” APIì…ë‹ˆë‹¤<a href="https://github.com/dimsssss/writer"></a>.</p>
</p>

<p align="center">
    <a href="">
        <img alt="license" src="https://img.shields.io/github/license/dimsssss/toy-intergration-test">
    </a>
    <a href="">
        <img alt="npm" src="https://img.shields.io/node/v-lts/npm?label=npm&logo=npm">
    </a>
    <a href="https://expressjs.com/">
        <img alt="express" src="https://img.shields.io/node/v-lts/express?label=express&logo=express">
    </a>
    <a href="https://jestjs.io/">
        <img alt="jest" src="https://img.shields.io/node/v-lts/express?label=jest&logo=jest">
    </a>
    <a href="https://sequelize.org/">
        <img alt="sequelize" src="https://img.shields.io/node/v-lts/sequelize?label=sequelize&logo=sequelize">
    </a>
    <a href="https://dl.circleci.com/status-badge/redirect/gh/dimsssss/writer/tree/main">
        <img alt="circleci" src="https://dl.circleci.com/status-badge/img/gh/dimsssss/writer/tree/main.svg?style=svg">
    </a>
</p>

## ë¬´í•œ ìŠ¤í¬ë¡¤ ì¡°íšŒ

1. ê²Œì‹œê¸€ì˜ ê°œìˆ˜ê°€ ë§ì„ ë•Œ, ì‚¬ìš©ìê°€ ì•±ì´ë‚˜ ì›¹ì—ì„œ ìŠ¤í¬ë¡¤ì„ ë‚´ë¦´ ë•Œë§ˆë‹¤ ì˜¤ë˜ëœ ê¸€ë“¤ì´
   ê³„ì† ë¡œë“œ ë˜ëŠ” í˜•íƒœë¡œ API ë¥¼ ìˆ˜ì •í•´ì£¼ì„¸ìš”.
2. ê²Œì‹œê¸€ì´ ì¤‘ë³µìœ¼ë¡œ ë‚˜íƒ€ë‚˜ë©´ ì•ˆë©ë‹ˆë‹¤.
3. ì¶”ê°€ ë¡œë“œëŠ” 20 ê°œ ë‹¨ìœ„ë¡œ í•´ì£¼ì„¸ìš”

ë¬´í•œ ìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•˜ê¸° ìœ„í•´ì„œ **No offset í˜ì´ì§•ìœ¼ë¡œ êµ¬í˜„ì„ í•˜ì˜€ë‹¤**. ìƒê°í•´ë³¸ ë°©ë²•ì€ ë‘ ê°€ì§€ê°€ ìˆëŠ”ë° ê°ê°ì˜ ì¥ë‹¨ì ì´ ìˆë‹¤.

### Limit Offsetì„ ì´ìš©í•œ ë°ì´í„° ì¡°íšŒ

í˜„ì¬ì˜ ê²Œì‹œê¸€ì—ì„œ 20ê°œë¥¼ ê°€ì ¸ì˜¤ë ¤ë©´ ê°€ì¥ ë¨¼ì € ìƒê°ë‚˜ëŠ” ê²ƒì€ select \* from offset limitì„ ì´ìš©í•˜ëŠ” ë°©ë²•ì´ë‹¤.

ì²«ë²ˆì§¸ ì¡°íšŒë¥¼ í•  ë•Œ í˜ì´ì§•ì„ êµ¬í˜„í•˜ì—¬ ì „ì²´ í˜ì´ì§€ í¬ê¸°, í˜„ì¬ í˜ì´ì§€ë¥¼, í•œ í˜ì´ì§€ë‹¹ ê²Œì‹œê¸€ ìˆ˜(20ê°œ)ë¥¼ ëª¨ë‘ êµ¬í•´ì„œ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë„˜ê²¨ì¤€ë‹¤. í´ë¼ì´ì–¸íŠ¸ëŠ” ìŠ¤í¬ë¡¤ì„ ë‚´ë¦´ ë•Œë§ˆë‹¤ í•„ìš”í•œ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë„˜ê²¨ì£¼ë©´ ì„œë²„ëŠ” í˜ì´ì§€ ìˆ˜ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ë„˜ê²¨ì¤€ë‹¤.

offsetì€ í˜„ì¬ í˜ì´ì§€ \* í˜ì´ì§€ë‹¹ ê²Œì‹œê¸€ ìˆ˜ì´ê³  ì°¨ë¡€ëŒ€ë¡œ 20ê°œë¥¼ ê°€ì ¸ì˜¨ë‹¤(limit 20)

ì´ ë°©ë²•ì€ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë„ ë‹¤ ì½ëŠ” ë‹¨ì ì´ ìˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì•„ì£¼ ë’¤ì— ìˆëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ, ë°±ë§Œë²ˆë¶€í„° ë°±ë§Œ 10ë²ˆê¹Œì§€ì˜ ë°ì´í„°ë¥¼ ì¡°íšŒí•œë‹¤ë©´ 100ë§Œë²ˆê¹Œì§€ í•„ìš”í•˜ì§€ ì•ŠëŠ” ë°ì´í„°ë¥¼ í•˜ë‚˜ì”© ì „ë¶€ ì½ê³  ë’¤ì— 10ê°œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¨ë‹¤.ìš”êµ¬í•˜ëŠ” ë°ì´í„°ê°€ ë’¤ì— ìˆì„ìˆ˜ë¡ ëŠë ¤ì§€ëŠ” ë°©ë²•ì´ë‹¤.

### No offsetì„ ì´ìš©í•œ ì¡°íšŒ

ì´ ë°©ë²•ì€ offsetì— í•´ë‹¹í•˜ëŠ” ê°’ì„ PKë¡œ ì¡ì•„ì„œ ë¶ˆí•„ìš”í•œ ì½ê¸°ë¥¼ ì—†ì• ëŠ” ë°©ë²•ì´ë‹¤. PkëŠ” ìë™ìœ¼ë¡œ ì¸ë±ìŠ¤ê°€ ê±¸ë ¤ìˆê¸° ë•Œë¬¸ì— ì‹œì‘ì ì„ ë¹ ë¥´ê²Œ ì°¾ì„ ìˆ˜ ìˆë‹¤. ë‹¨ì ìœ¼ë¡œëŠ” numbering í˜ì´ì§€ì—ì„œëŠ” ì‚¬ìš©í•  ìˆ˜ ì—†ë‹¤. ì˜ˆë¥¼ ë“¤ì–´
í˜„ì¬ ë³´ê³  ìˆëŠ” ë°ì´í„°ì˜ ìœ„ì¹˜ê°€ 7 í˜ì´ì§€ë¼ë©´ ë°”ë¡œ 1 í˜ì´ì§€ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ë³¼ ìˆ˜ ì—†ë‹¤.

### ì‹¤í–‰ ê³„íš

ì¸ë±ìŠ¤ê°€ ë™ì‘í•˜ê³  ìˆëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ ì‹¤í–‰ê³„íšìœ¼ë¡œ ì¡°íšŒ ì¿¼ë¦¬ë¥¼ ì‚¬ìš©í•´ë³´ì•˜ë‹¤.

Backward index scan

ì²˜ìŒë³´ëŠ” ë©”ì‹œì§€ì—¬ì„œ ì°¾ì•„ë³´ì•˜ëŠ”ë° ì¸ë±ìŠ¤ í‚¤ ê°’ì— ìƒê´€ì—†ì´ ì˜¤ë¥¸ìª½ leaf ë…¸ë“œì—ì„œ ì™¼ìª½ìœ¼ë¡œ ë™ì‘í•œë‹¤ëŠ” ë©”ì‹œì§€ì˜€ë‹¤. ìš”êµ¬ ì¡°ê±´ì—ì„œ ìµœì‹ ìˆœìœ¼ë¡œ ë°ì´í„°ë¥¼ ì›í–ˆê¸° ë•Œë¬¸ì— ê·¸ì— ë§ê²Œ ì •ë ¬í•˜ë©´ ë‹¹ì—°íˆ ì—­ìˆœìœ¼ë¡œ ì›€ì§ì´ëŠ”ë° ì„±ëŠ¥ìƒì˜ ì´ìŠˆê°€ ìˆì—ˆë‹¤

```
-> Limit: 20 row(s)  (cost=0.46 rows=1) (actual time=0.040..0.040 rows=0 loops=1)
    -> Filter: ((articles.deletedAt is null) and (articles.sequenceId < 4))  (cost=0.46 rows=1) (actual time=0.033..0.033 rows=0 loops=1)
        -> Index range scan on articles using PRIMARY  (cost=0.46 rows=1) (actual time=0.024..0.024 rows=0 loops=1)

-> Limit: 20 row(s)  (cost=0.71 rows=1) (actual time=0.052..0.052 rows=0 loops=1)
    -> Filter: (articles.deletedAt is null)  (cost=0.71 rows=1) (actual time=0.044..0.044 rows=0 loops=1)
        -> Index range scan on articles using articles_sequenceId_IDX, with index condition: (articles.sequenceId < 4)  (cost=0.71 rows=1) (actual time=0.037..0.037 rows=0 loops=1)
```

ìš”ì•½í•´ë³´ë©´ ì™¼ìª½ìœ¼ë¡œ ë³´ë‚˜ ì˜¤ë¥¸ìª½ìœ¼ë¡œë³´ë‚˜ ë˜‘ê°™ì§€ë§Œ mysql ë‚´ë¶€ì ìœ¼ë¡œ ì ê¸ˆì´ ì™¼ìª½ì—ì„œ ì˜¤ë¥¸ìª½ìœ¼ë¡œ ìœ ë¦¬í•˜ê²Œ ë˜ì–´ ìˆë‹¤. ì˜¤ë¦„ì°¨ìˆœìœ¼ë¡œ ì¡°íšŒë¥¼ í•˜ë©´ ì°¨ë¡€ ëŒ€ë¡œ ì½ì–´ê°€ë©´ì„œ ì ê·¸ë©´ ë˜ì§€ë§Œ ì—­ìˆœì¼ ê²½ìš°ì—ëŠ” ì•„ë˜ì™€ ê°™ì€ ì‘ì—…ì„ í•œë‹¤

1. ì»¤ì„œì˜ ìƒíƒœë¥¼ ì €ì¥í•˜ê³  ë‚´ë¶€ ë¯¸ë‹ˆ íŠ¸ëœì­ì…˜ì„ ì»¤ë°‹í•´ì„œ ë¯¸ë‹ˆ íŠ¸ëœì­ì…˜ ë²„í¼ë¥¼ ê¸€ë¡œë²Œ ë¦¬ë‘ ë¡œê·¸ ë²„í¼ë¡œ ë³µì‚¬
2. ë¯¸ë‹ˆ íŠ¸ëœì­ì…˜ì„ ì¬ì‹œì‘
3. ì»¤ì„œì˜ ìƒíƒœë¥¼ ë‹¤ì‹œ ë³µêµ¬ (ì´ ê³¼ì •ì—ì„œ í˜„ì¬ ë¸”ë¡ì´ ì´ë™ë˜ëŠ” ê²ƒì„ ë§‰ê¸° ìœ„í•´ì„œ pinningì„ í•˜ê³  í•„ìš”ì— ë”°ë¼ì„œ í˜„ì¬ ë¸”ë¡ê³¼ ì´ì „ ë¸”ë¡(Backward block)ì˜ ì ê¸ˆì„ íšë“)

ê¸€ ë‚´ìš©ì— ë”°ë¼ \***\*Descending index\*\***ë¥¼ ì§€ì •í•´ì„œ ì—­ìˆœìœ¼ë¡œ ì™¼ìª½ë¶€í„° ì½ê¸° ê°€ëŠ¥í•˜ê²Œ ë°”ê¿”ë³´ê¸°ë¡œ í–ˆë‹¤

ê·¸ëŸ¬ë‚˜ ê²°ê³¼ëŠ” ê¸°ì¡´ì´ ë” ë¹ ë¥´ë‹¤ ì•„ë¬´ë˜ë„ pkë¡œ ì„¤ì •ë˜ì–´ ìˆì–´ì„œ ê²°ê³¼ê°€ ë” ë¹ ë¥¸ê²ƒìœ¼ë¡œ ì˜ˆìƒëœë‹¤

[MySQL Ascending index vs Descending index](https://tech.kakao.com/2018/06/19/mysql-ascending-index-vs-descending-index/)

## ì™¸ë¶€ í™˜ê²½ê³¼ ì¢…ì† ëœ í…ŒìŠ¤íŠ¸ ì½”ë“œ

í…ŒìŠ¤íŠ¸ ì½”ë“œì— Mockì„ ì‚¬ìš©í•˜ë©´ ì¢‹ì€ ì ì„ ìµœê·¼ì— ê²½í—˜ì„ í•˜ì˜€ë‹¤. ê¸°ì¡´ì— ìˆë˜ í†µí•©í…ŒìŠ¤íŠ¸ë¥¼ Mockì„ ì´ìš©í•œ ì½”ë“œë¡œ ëŒ€ì²´ë¥¼ í•˜ì˜€ë‹¤.

### ë³€ê²½ ì—†ëŠ” ì½”ë“œê°€ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨

READMEë¥¼ ìˆ˜ì •í•˜ê³  commitì„ ë§Œë“¤ì–´ì„œ ì €ì¥ì†Œì— pushë¥¼ í•˜ëŠ”ë° í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨í•˜ì˜€ë‹¤

![ìŠ¤í¬ë¦°ìƒ· 2022-09-30 10-14-41.png](./image/2022-09-30-10-14-41.png)

ë‚´ì‹¬ ë‹¹í™©í–ˆë‹¤. ë§ˆì§€ë§‰ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ê°€ ì„±ê³µí•˜ëŠ” ê²ƒì„ í™•ì¸í•˜ê³  ìˆ˜ì •ëœ ë‚´ì—­ì´ ì—†ë˜ ìƒí™©ì´ì—ˆê¸° ë•Œë¬¸ì´ë‹¤. ë°”ë¡œ ê°œì¸ ë¡œì»¬ì—ì„œ í…ŒìŠ¤íŠ¸ë¥¼ ëŒë ¤ë³´ì•˜ëŠ”ë° ë™ì¼í•˜ê²Œ í…ŒìŠ¤íŠ¸ê°€ ì‹¤íŒ¨ë¥¼ í•˜ì˜€ë‹¤.

![API key ë§Œë£Œ](./image/2022-09-30-10-14-12.png)

API Keyë¥¼ ê°±ì‹ í•˜ë¼ê³  ë©”ì¼ì„ ë°›ì•˜ì—ˆëŠ”ë° ìŠê³  ìˆì—ˆë‹¤. ë¬¸ë“ ì´ í…ŒìŠ¤íŠ¸ë¥¼ Mockì„ ì´ìš©í–ˆë”ë¼ë©´ ë” ì¢‹ì•˜ì„ ê²ƒ ê°™ë‹¤ëŠ” ìƒê°ì´ ë“¤ì—ˆë‹¤. í…ŒìŠ¤íŠ¸ëŠ” íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ ë…ë¦½ì ì´ì–´ì•¼í•œë‹¤. ê°ê°ì˜ í…ŒìŠ¤íŠ¸ëŠ” ì„œë¡œ ì˜í–¥ì„ ì£¼ì§€ ì•Šê³  ë‹¨ì¼ ë‹¨ìœ„ë¡œ ì‹¤í–‰ì´ ê°€ëŠ¥í•´ì•¼ ë³€ê²½ì„ í•´ë„ ë§ë”í•˜ê²Œ ëŒì•„ê°„ë‹¤.

ì´ í…ŒìŠ¤íŠ¸ëŠ” ì½”ë“œì— ë³€ê²½ì´ ì—†ì–´ë„ ì™¸ë¶€ ìš”ì¸ì— ì˜í•´ ì‹¤íŒ¨ë¥¼ í•˜ê²Œ ë˜ì—ˆë‹¤. ë³€ê²½ ì—†ëŠ” ì½”ë“œê°€ ì‹¤íŒ¨ë¥¼ í•˜ë‹¤ê°€ ì„±ê³µì„ í•˜ë‹¤ê°€ë¥¼ ë°˜ë³µí•œë‹¤ë©´ ì¼ê´€ì„±ì´ ì—†ì–´ì§€ê³  ì‹ ë¢°í•˜ê¸° í˜ë“¤ì–´ì§„ë‹¤. ì™¸ë¶€ API key ê°±ì‹ ë„ 3ì£¼ì— í•œë²ˆ ì •ë„ ë°œìƒí•˜ëŠ”ë° ë§¤ë²ˆ ìˆ˜ë™ìœ¼ë¡œ ë„£ì–´ì£¼ëŠ” ê²ƒë„ ê·€ì°®ë‹¤.

### í•´ê²° ë°©ì•ˆ

ë‘ ê°€ì§€ë¥¼ í•´ê²°ë°©ì•ˆì„ ë– ì˜¬ë ¸ëŠ”ë° ì²«ë²ˆì§¸ê°€ Mockì„ ì´ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ê²ƒì´ë‹¤. ì´ ë°©ë²•ì€ ì™¸ë¶€ APIë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ ë…ë¦½ì ì´ê³  ë„¤íŠ¸ì›Œí¬ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šì•„ì„œ ë¹ ë¥´ë‹¤. ë‹¨ì ìœ¼ë¡œëŠ” ì‹¤ì œë¡œ ë™ì‘í•˜ëŠ”ì§€ëŠ” ë³´ì¥ì„ í•˜ì§€ ëª»í•œë‹¤.

ë‹¤ìŒìœ¼ë¡œëŠ” ë°°ì¹˜ í”„ë¡œê·¸ë¨ì„ ë§Œë“¤ì–´ì„œ API keyë¥¼ ê°±ì‹ í•˜ëŠ” ë°©ë²•ì´ë‹¤. ì´ ë°©ë²•ì€ ìƒê°í•˜ìë§ˆì ë¨¸ë¦¬ ì†ì—ì„œ ì§€ì›Œë²„ë ¸ë‹¤. ë¨¼ì € ë°°ì¹˜ í”„ë¡œê·¸ë¨ì„ ë§Œë“œëŠ” ë¹„ìš©ë³´ë‹¤ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ëŠ” ë¹„ìš©ì´ í›¨ì”¬ ì €ë ´í•˜ë‹¤. ê°€ì¥ í° ì´ìœ ëŠ” ë‚´ê°€ ì‚¬ìš©í•˜ëŠ” CI í”Œë«í¼ì—ì„œ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ env ê°’ ê°±ì‹ ì„ ê±°ë¶€í•  ìˆ˜ ìˆë‹¤

## ğŸ§ª í…ŒìŠ¤íŠ¸

```shell
npm run test
```

## ğŸ§¾ ì‹¤í–‰

```shell
npm run dev
```

## ğŸŒ API Document

https://app.swaggerhub.com/apis-docs/dimsssss/post-api/1.0.0
